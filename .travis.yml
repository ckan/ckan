language: python
python:
  - "2.7"
install:
  - "pip install -r pip-requirements.txt --use-mirrors"
  - "pip install -r pip-requirements-test.txt --use-mirrors"
before_script:
  - psql -c 'create database ckan_test;' -U postgres
  - psql -c 'create database datastore_test;' -U postgres
  - python setup.py develop
  - paster make-config ckan development.ini
  - curl https://raw.github.com/moliware/travis-solr/master/travis-solr.sh | SOLR_VERSION=4.0.0 SOLR_CONFS=ckan/config/solr/schema-2.0.xml bash
  - paster --plugin=ckan db init --config test-travis.ini
  - mkdir data sstore
script: "nosetests --ckan --with-pylons=test-travis.ini ckan ckanext -vs"