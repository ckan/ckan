this.ckan.module('dashboard',function($){return{button:null,popover:null,searchTimeout:null,initialize:function(){$.proxyAll(this,/_on/);this.button=$('#followee-filter .btn').on('click',this._onShowFolloweeDropdown);var title=this.button.prop('title');this.button.popover({placement:'bottom',title:'Filter',html:true,content:$('#followee-popover').html()});this.button.prop('title',title);this.popover=this.button.data('bs.popover').tip().addClass('popover-followee');},_onShowFolloweeDropdown:function(){this.button.toggleClass('active');if(this.button.hasClass('active')){setTimeout(this._onInitSearch,100);}
return false;},_onInitSearch:function(){var input=$('input',this.popover);if(!input.hasClass('inited')){input.on('keyup',this._onSearchKeyUp).addClass('inited');}
input.focus();},_onSearchKeyUp:function(){clearTimeout(this.searchTimeout);this.searchTimeout=setTimeout(this._onSearchKeyUpTimeout,300);},_onSearchKeyUpTimeout:function(){var input=$('input',this.popover);var q=input.val().toLowerCase();if(q){$('li',this.popover).hide();$('li.everything, [data-search^="'+q+'"]',this.popover).show();}else{$('li',this.popover).show();}}};});