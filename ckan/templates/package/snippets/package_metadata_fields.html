{% import 'macros/form.html' as form %}

{% set organizations_available = h.organizations_available() %}
{% if organizations_available %}
  {% set organization = h.dataset_organization(data) %}
  <div class="control-group">
    <label for="field-groups" class="control-label">{{ _('Organization') }}</label>
    <div class="controls">
      <select id="field-groups" name="organizations__{{ organizations | count }}__id" data-module="autocomplete">
        <option value="">{{ _('Select an organization...') }}</option>
        {% for org in organizations_available %}
        <option value="{{ org.id }}" {% if org.id == organization.id %}selected="selected"{% endif %}>{{ org.name }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="control-group">
    <label class="control-label">Privacy</label>
    <div class="controls">
      <label for="cap_public" class="radio inline">
        <input id="cap_public" type="radio" name="organizations__0__capacity" value="public" {{"checked=\"checked\"" if (organization or {}).get('capacity','') in ['public', ''] else ''}}>
        Public
      </label>
      <label for="cap_private" class="radio inline">
        <input id="cap_private" type="radio" name="organizations__0__capacity" value="private" {{"checked=\"checked\"" if (organization or {}).get('capacity','') == 'private' else ''}}>
        Private
      </label>
    </div>
  </div>
{% endif %}

{{ form.input('author', label=_('Author'), id='field-author', placeholder=_('Joe Bloggs'), value=data.author, error=errors.author, classes=['control-medium']) }}

{{ form.input('author_email', label=_('Author Email'), id='field-author-email', placeholder=_('joe@example.com'), value=data.author_email, error=errors.author_email, classes=['control-medium']) }}

{{ form.input('maintainer', label=_('Maintainer'), id='field-maintainer', placeholder=_('Joe Bloggs'), value=data.maintainer, error=errors.maintainer, classes=['control-medium']) }}

{{ form.input('maintainer_email', label=_('Maintainer Email'), id='field-maintainer-email', placeholder=_('joe@example.com'), value=data.maintainer_email, error=errors.maintainer_email, classes=['control-medium']) }}

{% block custom_fields %}
  {% snippet 'snippets/custom_form_fields.html', extras=data.extras, errors=errors, limit=3 %}
{% endblock %}
