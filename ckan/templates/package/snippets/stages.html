{% set s1 = stages[0] or 'active' %}
{% set s2 = stages[1] or 'uncomplete' %}
{% set s3 = stages[2] or 'uncomplete' %}
{% if s1 != 'uncomplete' %}{% set class = 'stage-1' %}{% endif %}
{% if s2 != 'uncomplete' %}{% set class = 'stage-2' %}{% endif %}
{% if s3 != 'uncomplete' %}{% set class = 'stage-3' %}{% endif %}

<ol class="stages {{ class }}">
  <li class="first {{ s1 }}">
    {% if s1 != 'complete' %}
      <span class="highlight">{{ _('Create Dataset') }}</span>
    {% else %}
      {% link_for _('Create Dataset'), controller='package', action='new', class_="highlight" %}
    {% endif %}
  </li>
  <li class="middle {{ s2 }}">
    {% if s2 != 'complete' %}
      <span class="highlight">{{ _('Add data') }}</span>
    {% else %}
      {% link_for _('Add data'), controller='package', action='new', class_="highlight" %}
    {% endif %}
  </li>
  <li class="last {{ s3 }}">
    {% if s3 != 'complete' %}
      <span class="highlight">{{ _('Additional data') }}</span>
    {% else %}
      {% link_for _('Additional data'), controller='package', action='new', class_="highlight" %}
    {% endif %}
  </li>
</ol>
