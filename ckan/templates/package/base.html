{% extends "page.html" %}

{% set pkg = pkg_dict %}
{% set dataset_type = dataset_type or pkg.type or 'dataset' %}

{% block subtitle %}{{ _(dataset_type.title()) }}{% endblock %}

{% block breadcrumb_content %}
  {% if pkg %}
    {% set dataset = h.dataset_display_name(pkg) %}
    {% if pkg.organization %}
      {% set organization = h.get_translated(pkg.organization, 'title') or pkg.organization.name %}
      {% set group_type = pkg.organization.type %}
      <li class="breadcrumb-item"><a href="{{ h.url_for(group_type + '.index') }}"> {{ h.humanize_entity_type('organization', group_type, 'breadcrumb') or _('Organizations') }}</a></li>
      <li class="breadcrumb-item"><a href="{{ h.url_for(group_type + '.read', id=pkg.organization.name) }}"> {{ organization|truncate(30) }}</a></li>
    {% else %}
    <li class="breadcrumb-item"><a href="{{ h.url_for(dataset_type + '.search') }}"> {{ _(dataset_type.title()) }}</a></li>
    {% endif %}
    <li class="breadcrumb-item active"><a href="{{ h.url_for(pkg.type + '.read', id=pkg.id if is_activity_archive else pkg.name) }}" aria-current="page"> {{ dataset|truncate(30) }}</a></li>
  {% else %}
    <li class="breadcrumb-item"><a href="{{ h.url_for(dataset_type + '.search') }}"> {{ _(dataset_type.title()) }}</a></li>
    <li class="breadcrumb-item active"><a href="#" aria-current="page"> {{ _('Create Dataset') }}</a></li>
  {% endif %}
{% endblock %}
