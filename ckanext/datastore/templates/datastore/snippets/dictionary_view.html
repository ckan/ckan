{% block dictionary_view %}
  <div class="module-content">
    <h2>{{ _('Data Dictionary') }}</h2>

    {% macro dictionary_field(label) %}
      {% set content = caller().strip() %}
      {% if content %}
        <dt class="col-sm-3 text-secondary">{{ label }}</dt>
        <dd class="col-sm-9">{{ content }}</dd>
      {% endif %}
    {% endmacro %}

    {% for field in ddict %}

      {% set field_type %}{% block dictionary_field_type scoped
        %}{{ field.type }}{% endblock %}{% endset %}

      <div class="accordion">
        <div class="accordion-item">
          <h3 class="accordion-header" id="field-{{ field.id }}"
            ><button class="accordion-button collapsed" type="button"
            data-bs-toggle="collapse" aria-expanded="false"
            data-bs-target="#collapse{{ prefix }}-{{ field.id }}"
            aria-controls="collapse{{ prefix }}-{{ field.id }}"
            ><div class="col-sm-1"
            >{{ loop.index }}.</div
            ><div class="col-sm-7">{{
            h.get_translated(field.get('info', {}), 'label') or field.id
            }}</div><div class="col-sm-4"
            >{{ field_type }}</div></h3>
          <div id="collapse{{ prefix }}-{{ field.id }}"
            class="accordion-collapse collapse"
            aria-labelledby="field-{{ field.id }}">
            <dl class="row accordion-body">
              {% block resource_data_dictionary_field scoped %}
                {% call dictionary_field(_('ID')) %}{{ field.id }}{% endcall %}
                {% call dictionary_field(_('Type')) %}{{ field_type }}{% endcall %}
                {% call dictionary_field(_('Label')) %}{{
                  h.get_translated(field.get('info', {}), 'label') }}{% endcall %}
                {% call dictionary_field(_('Description')) %}{{
                  h.render_markdown(h.get_translated(
                  field.get('info', {}), 'notes')) }}{% endcall %}
                {% block dictionary_field_extras scoped %}
                {% endblock %}
              {% endblock %}
            </dl>
          </div>
        </div>
      </div>

    {% endfor %}
  </div>
{% endblock %}
